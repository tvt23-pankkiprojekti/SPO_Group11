<!-- localStorage.getItem("token") --> 
<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/css/style.css">
    </head>
        <body>
            <button id="testButton">test</button><br>
            <h1>User</h1>
            <table id="userTable"></table>

            <h1>Transaction</h1>
            <table id="transactionTable">
                <tr>
                    <th>idTransaction</th>
                    <th>Account_id</th>
                    <th>dateTime</th>
                    <th>balanceChange</th>
                    <th>transactionType</th>
                    <th><button name = "button" type = "button">Edit</button></th>
                </tr>
            </table>
            <h1>Account</h1>
            <table id="accountTable">
                <tr>
                    <th>idAccount</th>
                    <th>User_id</th>
                    <th>type</th>
                    <th>balance</th>
                    <th>limit</th>
                    <th>accountNumber</th>
                </tr>
            </table>
            <h1>Card Account</h1>
            <table id="cardAccountTable">
                <tr>
                    <th>idCard_Account</th>
                    <th>Card_id</th>
                    <th>Account_id</th>
                </tr>
            </table>
        </body>
    <script>
        const token = localStorage.getItem("token");
        const userTable = document.getElementById("userTable");
        const testButton = document.getElementById("testButton");
        
        const testToken = localStorage.getItem("token");
        
        async function getDataCardAccount(){
            const res = await fetch('admin/api/card_account', {
                headers: {
                    "Content-Type": "application/json",
                    "Accept": "application/json",
                    "Authorization": testToken
                }
            });

            const data = await res.json();
            //console logging tests
            console.log(data);
            console.log(typeof data);
            
            const cardAccountIds = data.map(item => item.idCard_Account);
            const cardIds = data.map(item => item.Card_id);
            const accountIds = data.map(item => item.Account_id);
            const lenght = data.length;
            //console.log(lenght);

            const testArray = [cardAccountIds, cardIds, accountIds];
            console.log(testArray);
            console.log(testArray[0]);
            const arrayLenght = testArray.length;
            console.log(arrayLenght);

            await dodii(testArray, arrayLenght, lenght);
            //return data;
        }
        testButton.addEventListener("click", getDataCardAccount);

        async function dodii(infoArray, arrayLenght, dataLenght) {
            const trTable = document.getElementById("cardAccountTable");

            for(let i=0; i < dataLenght; i++){
                // a new table row
                const tr = document.createElement('tr');
                for (let j=0; j < arrayLenght; j++){
                    // a new data cell/item/value what ever you want to call it
                    const td = document.createElement('td');
                    td.textContent = infoArray[j][i];
                    tr.appendChild(td);
                }
            
                trTable.append(tr);
            }
        }



    </script>
</html>